#!/bin/sh
# ------------------------------------------------------------------------------------------
#
# 	ПРОЕКТ КВАС
#
# ------------------------------------------------------------------------------------------
# 	Данный файл служит основной библиотекой функций пакета КВАС
# ------------------------------------------------------------------------------------------
#	Разработчик: kvas@zeleza.ru
#	Дата: 18/01/2024
#	Лицензия: Apache License 2.0
# ------------------------------------------------------------------------------------------

if [ "${1}" = "hook" ] ; then

	# shellcheck source=opt\bin\libs\env.sh
    . /opt/apps/kvas/bin/libs/env.sh

	if [ -z "$id" ]; then
        exit 1
    fi

	# В случае, если созданное подключение уже есть в списке интерфейсов,
	# удаляем его из файла /opt/etc/inface_equals
	if grep -q "^${id}|" "${INFACE_NAMES_FILE}"; then
    	escaped_id="${id//\//\\/}"  # Заменяет / на \/
    	sed -i "/^${escaped_id}|/d" "${INFACE_NAMES_FILE}"
	fi
fi
